[gd_scene load_steps=12 format=3 uid="uid://cf8xoru5eg3vr"]

[ext_resource type="Script" uid="uid://bripj1obpu7od" path="res://scenes/ray_cast_2d.gd" id="1_apstt"]
[ext_resource type="Texture2D" uid="uid://dqrngw1qgr7kr" path="res://assets/ui/glowing_circle.png" id="2_imgww"]
[ext_resource type="PackedScene" uid="uid://63lsrxugl7an" path="res://scenes/reflectors.tscn" id="4_vtulw"]
[ext_resource type="PackedScene" uid="uid://d10edroohmpw5" path="res://scenes/wall.tscn" id="5_7fncp"]
[ext_resource type="TileSet" uid="uid://cvprit4qech2u" path="res://assets/wall_tileset.tres" id="6_73fua"]
[ext_resource type="Texture2D" uid="uid://dykw8k1csla8c" path="res://assets/ui/Letter.png" id="6_imgww"]

[sub_resource type="GDScript" id="GDScript_vtulw"]
script/source = "extends Node2D

func _ready() -> void:
	$LightSource/Button.pressed.connect(_on_start_pressed)

func _on_start_pressed() -> void:
	$LightSource/RayCast2D.shoot()
"

[sub_resource type="GDScript" id="GDScript_7fncp"]

[sub_resource type="GDScript" id="GDScript_imgww"]

[sub_resource type="CircleShape2D" id="CircleShape2D_nk2lv"]
radius = 3.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_nk2lv"]
size = Vector2(10, 11)

[node name="LightBendingPuzzle" type="Node2D"]
script = SubResource("GDScript_vtulw")

[node name="LightSource" type="Area2D" parent="."]
disable_mode = 2
script = SubResource("GDScript_7fncp")

[node name="RayCast2D" type="RayCast2D" parent="LightSource"]
target_position = Vector2(67, 0)
collide_with_areas = true
script = ExtResource("1_apstt")

[node name="CPUParticles2D" type="CPUParticles2D" parent="LightSource/RayCast2D"]
visible = false

[node name="Line2D" type="Line2D" parent="LightSource"]
scale = Vector2(0.88461536, 1)
points = PackedVector2Array(0, 0, 22, 0)
width = 1.0
default_color = Color(1, 0.8745098, 0.13333334, 1)
begin_cap_mode = 2
end_cap_mode = 2

[node name="Sprite2D" type="Sprite2D" parent="LightSource"]
modulate = Color(1, 0.8745098, 0.13333334, 1)
scale = Vector2(0.4, 0.395)
texture = ExtResource("2_imgww")

[node name="Button" type="Button" parent="LightSource"]
offset_left = -50.0
offset_top = 114.0
offset_right = 55.0
offset_bottom = 155.0
text = "START"
script = SubResource("GDScript_imgww")

[node name="CollisionShape2D" type="CollisionShape2D" parent="LightSource"]
shape = SubResource("CircleShape2D_nk2lv")

[node name="StaticBody2D2" type="StaticBody2D" parent="." groups=["target"]]
visible = false
modulate = Color(0.93415105, 0, 0.2010853, 1)
position = Vector2(-26, -12)
scale = Vector2(0.99999994, 0.99999994)

[node name="Sprite2D" type="Sprite2D" parent="StaticBody2D2"]
top_level = true
position = Vector2(-26.000002, -12)
scale = Vector2(0.34375, 0.34375)
texture = ExtResource("6_imgww")

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D2"]
self_modulate = Color(1, 1, 1, 0)
scale = Vector2(0.9999999, 0.9999999)
shape = SubResource("RectangleShape2D_nk2lv")

[node name="Reflectors" parent="." instance=ExtResource("4_vtulw")]
position = Vector2(236, 57.000023)
rotation = -2.3561945
scale = Vector2(0.08, 0.08)

[node name="Reflectors2" parent="." instance=ExtResource("4_vtulw")]
position = Vector2(26.999998, 57.000004)
rotation = 2.3561945
scale = Vector2(0.08, 0.08)

[node name="Reflectors6" parent="." instance=ExtResource("4_vtulw")]
position = Vector2(47, 60.999996)
rotation = 2.3561945
scale = Vector2(0.08, 0.08)

[node name="Reflectors7" parent="." instance=ExtResource("4_vtulw")]
position = Vector2(17, 47.999992)
rotation = 2.3561945
scale = Vector2(0.08, 0.08)

[node name="Reflectors3" parent="." instance=ExtResource("4_vtulw")]
position = Vector2(175.99998, 56.999996)
rotation = -2.3561945
scale = Vector2(0.08, 0.08)

[node name="Reflectors4" parent="." instance=ExtResource("4_vtulw")]
position = Vector2(145, 58.000023)
rotation = -2.3561945
scale = Vector2(0.08, 0.08)

[node name="Reflectors5" parent="." instance=ExtResource("4_vtulw")]
position = Vector2(106, 55.999996)
rotation = 1.5707964
scale = Vector2(0.08, 0.08)

[node name="Node2D" type="Node2D" parent="."]

[node name="Wall" parent="." instance=ExtResource("5_7fncp")]
visible = false
position = Vector2(149, -38)
rotation = 1.5707964
scale = Vector2(0.5, 0.5)

[node name="Camera2D" type="Camera2D" parent="."]
offset = Vector2(8, -10)

[node name="wallTileMap" type="TileMap" parent="."]
tile_set = ExtResource("6_73fua")
collision_animatable = true
format = 2
layer_0/tile_data = PackedInt32Array(-589841, 1900544, 23, -524305, 1900544, 23, -458769, 1900544, 23, -393233, 1900544, 23, -327697, 1900544, 23, -262161, 1900544, 23, -196625, 1900544, 23, -131089, 1900544, 23, -65553, 1900544, 23, -17, 1900544, 23, 65519, 1900544, 23, 131055, 1900544, 23, 393199, 1900544, 23, -655343, 1900544, 23, -589807, 1900544, 23, -524271, 1900544, 23, -458735, 1900544, 23, -393199, 1900544, 23, -327663, 1900544, 23, -262127, 1900544, 23, -196591, 1900544, 23, -131055, 1900544, 23, -65519, 1900544, 23, 17, 1900544, 23, 65553, 1900544, 23, 131089, 1900544, 23, 196625, 1900544, 23, 262161, 1900544, 23, 327697, 1900544, 23, -589840, 1900544, 23, -589839, 1900544, 23, -589838, 1900544, 23, -589837, 1900544, 23, -589836, 1900544, 23, -589835, 1900544, 23, -589834, 1900544, 23, -589833, 1900544, 23, -589832, 1900544, 23, -589831, 1900544, 23, -589830, 1900544, 23, -589829, 1900544, 23, -589828, 1900544, 23, -589827, 1900544, 23, -589826, 1900544, 23, -589825, 1900544, 23, -655360, 1900544, 23, -655359, 1900544, 23, -655358, 1900544, 23, -655357, 1900544, 23, -655356, 1900544, 23, -655355, 1900544, 23, -655354, 1900544, 23, -655353, 1900544, 23, -655352, 1900544, 23, -655351, 1900544, 23, -655350, 1900544, 23, -655349, 1900544, 23, -655348, 1900544, 23, -655347, 1900544, 23, -655346, 1900544, 23, -655345, 1900544, 23, -655344, 1900544, 23, -458768, 1900544, 23, -458765, 1900544, 23, -262160, 1900544, 23, -458764, 1900544, 23, -393228, 1900544, 23, -327692, 1900544, 23, -262156, 1900544, 23, -262157, 1900544, 23, -196620, 1900544, 23, -196619, 1900544, 23, -196618, 1900544, 23, -196617, 1900544, 23, -196616, 1900544, 23, -196615, 1900544, 23, -262151, 1900544, 23, -131079, 1900544, 23, -65543, 1900544, 23, -7, 1900544, 23, 65529, 1900544, 23, -327687, 1900544, 23, -327686, 1900544, 23, -65542, 1900544, 23, -393213, 1900544, 23, -327677, 1900544, 23, -262141, 1900544, 23, -196605, 1900544, 23, -131069, 1900544, 23, -131068, 1900544, 23, -131067, 1900544, 23, -131066, 1900544, 23, -131065, 1900544, 23, -131064, 1900544, 23, -131063, 1900544, 23, -131062, 1900544, 23, -65526, 1900544, 23, 10, 1900544, 23, -589814, 1900544, 23, -524278, 1900544, 23, -458742, 1900544, 23, -393201, 1900544, 23, -393200, 1900544, 23, -393229, 1900544, 23, -196621, 1900544, 23, -196624, 1900544, 23, -393232, 1900544, 23, -262150, 1900544, 23, -6, 1900544, 23, -524290, 1900544, 23, -458754, 1900544, 23, -393218, 1900544, 23, -327682, 1900544, 23, -262146, 1900544, 23, -196610, 1900544, 23, -131074, 1900544, 23, -65538, 1900544, 23, -327665, 1900544, 23, -327664, 1900544, 23, -589815, 1900544, 23, -524279, 1900544, 23, 393200, 1900544, 23, 393201, 1900544, 23, 393202, 1900544, 23, 393203, 1900544, 23, 393204, 1900544, 23, 393205, 1900544, 23, 393206, 1900544, 23, 393207, 1900544, 23, 393208, 1900544, 23, 393209, 1900544, 23, 393210, 1900544, 23, 393211, 1900544, 23, 393212, 1900544, 23, 393213, 1900544, 23, 393214, 1900544, 23, 393215, 1900544, 23, 327680, 1900544, 23, 327681, 1900544, 23, 327682, 1900544, 23, 327683, 1900544, 23, 327684, 1900544, 23, 327685, 1900544, 23, 327686, 1900544, 23, 327687, 1900544, 23, 327688, 1900544, 23, 327689, 1900544, 23, 327690, 1900544, 23, 327691, 1900544, 23, 327692, 1900544, 23, 327693, 1900544, 23, 327694, 1900544, 23, 327695, 1900544, 23, 327696, 1900544, 23, 131060, 1900544, 23, 131061, 1900544, 23, 131062, 1900544, 23, 131063, 1900544, 23, 131064, 1900544, 23, 131065, 1900544, 23, 131066, 1900544, 23, 131067, 1900544, 23, 131068, 1900544, 23, 131069, 1900544, 23, 131070, 1900544, 23, 131071, 1900544, 23, 65536, 1900544, 23, 65537, 1900544, 23, 65538, 1900544, 23, 65539, 1900544, 23, 65540, 1900544, 23, 65541, 1900544, 23, 65542, 1900544, 23, 65543, 1900544, 23, 65544, 1900544, 23, 65545, 1900544, 23, 65546, 1900544, 23, 65547, 1900544, 23, 65548, 1900544, 23, 65549, 1900544, 23, 65550, 1900544, 23, 65551, 1900544, 23, 65552, 1900544, 23, -131075, 1900544, 23, -65539, 1900544, 23, 196591, 1900544, 23, 262127, 1900544, 23, 327663, 1900544, 23, 262128, 1900544, 23, 327664, 1900544, 23, 262129, 1900544, 23, 327665, 1900544, 23, 262130, 1900544, 23, 327666, 1900544, 23, 327672, 1900544, 23, 327673, 1900544, 23, 196606, 1900544, 23, 262142, 1900544, 23, 196607, 1900544, 23, 262143, 1900544, 23, 262148, 1900544, 23, 262149, 1900544, 23, 131081, 1900544, 23, -65527, 1900544, 23, 9, 1900544, 23, -458743, 1900544, 23)
