[gd_scene load_steps=12 format=3 uid="uid://cf8xoru5eg3vr"]

[ext_resource type="Script" uid="uid://bripj1obpu7od" path="res://scripts/ray_cast_2d.gd" id="1_apstt"]
[ext_resource type="Texture2D" uid="uid://dqrngw1qgr7kr" path="res://assets/ui/glowing_circle.png" id="2_imgww"]
[ext_resource type="Script" uid="uid://cjml5ful0bfpx" path="res://scripts/letter.gd" id="3_imgww"]
[ext_resource type="PackedScene" uid="uid://63lsrxugl7an" path="res://scenes/reflectors.tscn" id="4_vtulw"]
[ext_resource type="TileSet" uid="uid://cvprit4qech2u" path="res://assets/wall_tileset.tres" id="6_73fua"]
[ext_resource type="Texture2D" uid="uid://dykw8k1csla8c" path="res://assets/ui/Letter.png" id="6_imgww"]

[sub_resource type="GDScript" id="GDScript_vtulw"]
script/source = "extends Node2D

func _ready() -> void:
	$LightSource/Button.pressed.connect(_on_start_pressed)

func _on_start_pressed() -> void:
	$LightSource/RayCast2D.shoot()
"

[sub_resource type="GDScript" id="GDScript_7fncp"]

[sub_resource type="GDScript" id="GDScript_imgww"]

[sub_resource type="CircleShape2D" id="CircleShape2D_nk2lv"]
radius = 3.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_nk2lv"]
size = Vector2(10, 11)

[node name="LightBendingPuzzle" type="Node2D"]
script = SubResource("GDScript_vtulw")

[node name="LightSource" type="Area2D" parent="." groups=["light_source"]]
disable_mode = 2
script = SubResource("GDScript_7fncp")

[node name="RayCast2D" type="RayCast2D" parent="LightSource"]
target_position = Vector2(67, 0)
collide_with_areas = true
script = ExtResource("1_apstt")

[node name="Line2D" type="Line2D" parent="LightSource"]
scale = Vector2(0.88461536, 1)
points = PackedVector2Array(0, 0, 22, 0)
width = 1.0
default_color = Color(1, 0.8745098, 0.13333334, 1)
begin_cap_mode = 2
end_cap_mode = 2

[node name="Sprite2D" type="Sprite2D" parent="LightSource"]
modulate = Color(1, 0.8745098, 0.13333334, 1)
scale = Vector2(0.4, 0.395)
texture = ExtResource("2_imgww")

[node name="Button" type="Button" parent="LightSource"]
offset_left = -50.0
offset_top = 114.0
offset_right = 55.0
offset_bottom = 155.0
text = "START"
script = SubResource("GDScript_imgww")

[node name="CollisionShape2D" type="CollisionShape2D" parent="LightSource"]
shape = SubResource("CircleShape2D_nk2lv")

[node name="Letter" type="Area2D" parent="." groups=["reflector", "target"]]
modulate = Color(0.93415105, 0, 0.2010853, 1)
scale = Vector2(0.99999994, 0.99999994)
script = ExtResource("3_imgww")

[node name="Sprite2D" type="Sprite2D" parent="Letter"]
top_level = true
position = Vector2(-140, -15)
scale = Vector2(0.6, 0.6)
texture = ExtResource("6_imgww")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Letter"]
self_modulate = Color(1, 1, 1, 0)
position = Vector2(-140, -15)
scale = Vector2(2.4, 2.4)
shape = SubResource("RectangleShape2D_nk2lv")

[node name="Reflectors" parent="." instance=ExtResource("4_vtulw")]
position = Vector2(247, 56)
rotation = -2.3561945
scale = Vector2(0.08, 0.08)

[node name="Reflectors2" parent="." instance=ExtResource("4_vtulw")]
visible = false
position = Vector2(26.999998, 57.000004)
rotation = 2.3561945
scale = Vector2(0.08, 0.08)

[node name="Reflectors6" parent="." instance=ExtResource("4_vtulw")]
position = Vector2(162.00002, 56.999996)
rotation = 2.3561945
scale = Vector2(0.08, 0.08)

[node name="Reflectors7" parent="." instance=ExtResource("4_vtulw")]
visible = false
position = Vector2(17, 47.999992)
rotation = 2.3561945
scale = Vector2(0.08, 0.08)

[node name="Reflectors3" parent="." instance=ExtResource("4_vtulw")]
position = Vector2(229, 55.000008)
rotation = -2.3561945
scale = Vector2(0.08, 0.08)

[node name="Reflectors4" parent="." instance=ExtResource("4_vtulw")]
position = Vector2(209, 57.000004)
rotation = -2.3561945
scale = Vector2(0.08, 0.08)

[node name="Reflectors5" parent="." instance=ExtResource("4_vtulw")]
position = Vector2(187, 55.999996)
rotation = 1.5707964
scale = Vector2(0.08, 0.08)

[node name="Node2D" type="Node2D" parent="."]

[node name="Camera2D" type="Camera2D" parent="."]
scale = Vector2(2, 2)
offset = Vector2(10, -10)

[node name="wallTileMap" type="TileMap" parent="."]
tile_set = ExtResource("6_73fua")
collision_animatable = true
format = 2
layer_0/tile_data = PackedInt32Array(-589841, 1900544, 23, -524305, 1900544, 23, -458769, 1900544, 23, -393233, 1900544, 23, -589840, 1900544, 23, -589839, 1900544, 23, -589838, 1900544, 23, -589837, 1900544, 23, -589836, 1900544, 23, -589835, 1900544, 23, -589834, 1900544, 23, -589833, 1900544, 23, -589832, 1900544, 23, -589831, 1900544, 23, -589830, 1900544, 23, -589829, 1900544, 23, -589828, 1900544, 23, -589827, 1900544, 23, -589826, 1900544, 23, -589825, 1900544, 23, -655360, 1900544, 23, -655359, 1900544, 23, -655358, 1900544, 23, -655357, 1900544, 23, -655356, 1900544, 23, -655355, 1900544, 23, -655354, 1900544, 23, -655353, 1900544, 23, -655352, 1900544, 23, -655351, 1900544, 23, -131089, 1900544, 23, -65553, 1900544, 23, -17, 1900544, 23, 131055, 1900544, 23, 196591, 1900544, 23, -327697, 1900544, 23, -262161, 1900544, 23, -196625, 1900544, 23, 65519, 1900544, 23, 327668, 1900544, 23, 327669, 1900544, 23, 327670, 1900544, 23, 327671, 1900544, 23, 327672, 1900544, 23, 327673, 1900544, 23, 327674, 1900544, 23, 393211, 1900544, 23, 327675, 1900544, 23, 131058, 1900544, 23, 131059, 1900544, 23, 131060, 1900544, 23, 131061, 1900544, 23, 131062, 1900544, 23, 131063, 1900544, 23, 131064, 1900544, 23, 131065, 1900544, 23, 131066, 1900544, 23)
